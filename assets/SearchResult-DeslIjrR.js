import{u as O,f as se,g as Ee,h as P,i as le,j as te,t as re,k as ue,l as q,m as f,n as ae,w as Y,p as E,q as oe,R as T,v as ie,x as ne,y as ce,z as Be,A as he,B as me,C as Ae,D as ve,E as Ce,F as g,G as de,H as pe,I as Se,J as I,K as M,L as ye}from"./app-CTeeeNPl.js";const Fe=["/","/resources/","/resources/links.html","/schools/SECE/0.main.html","/schools/SECE/11.%E5%85%B3%E4%BA%8E%E8%AF%BE%E7%A8%8B.html","/schools/SECE/15.%E5%85%B3%E4%BA%8E%E6%8A%80%E5%B7%A7.html","/schools/SECE/19.%E5%85%B3%E4%BA%8E%E7%AB%9E%E8%B5%9B.html","/schools/SECE/23.%E5%85%B3%E4%BA%8E%E7%95%99%E5%AD%A6.html","/schools/SECE/27.%E5%85%B3%E4%BA%8E%E5%B7%A5%E4%BD%9C.html","/schools/SECE/3.%E5%85%B3%E4%BA%8E%E5%AD%A6%E9%99%A2.html","/schools/SECE/31.%E5%85%B3%E4%BA%8E%E8%AF%BB%E7%A0%94.html","/schools/SECE/35.%E5%85%B3%E4%BA%8E%E8%BD%AC%E4%B8%93%E4%B8%9A.html","/schools/SECE/7.%E5%85%B3%E4%BA%8E%E7%94%9F%E6%B4%BB.html","/schools/SECE/End.html","/schools/SECE/FAQ.html","/courses/SECE/junior/%E4%BF%A1%E6%81%AF%E8%AE%BA%E4%B8%8E%E7%BC%96%E7%A0%81.html","/courses/SECE/junior/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86.html","/courses/SECE/junior/%E5%BE%AE%E6%B3%A2%E6%8A%80%E6%9C%AF%E4%B8%8E%E5%A4%A9%E7%BA%BF.html","/courses/SECE/junior/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F.html","/courses/SECE/junior/%E6%99%BA%E8%83%BD%E5%85%89%E7%94%B5%E6%84%9F%E7%9F%A5.html","/courses/SECE/junior/%E7%89%A9%E8%81%94%E7%BD%91%E5%AF%BC%E8%AE%BA.html","/courses/SECE/junior/%E7%8E%B0%E4%BB%A3%E4%BF%A1%E5%8F%B7%E5%A4%84%E7%90%86%E7%94%B5%E8%B7%AF%E8%AE%BE%E8%AE%A1%EF%BC%88Verilog%EF%BC%89.html","/courses/SECE/junior/%E7%94%9F%E6%88%90%E6%A8%A1%E5%9E%8B.html","/courses/SECE/junior/%E7%94%B5%E5%AD%90%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E8%B7%B5.html","/courses/SECE/junior/%E7%94%B5%E7%A3%81%E5%9C%BA%E4%B8%8E%E7%94%B5%E7%A3%81%E6%B3%A2.html","/courses/SECE/junior/%E7%9F%A9%E9%98%B5%E5%88%86%E6%9E%90.html","/courses/SECE/junior/%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C%E4%B8%8E%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0.html","/courses/SECE/junior/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.html","/courses/SECE/junior/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.html","/courses/SECE/junior/%E9%9B%B7%E8%BE%BE%E5%8E%9F%E7%90%86.html","/courses/SECE/freshman/%E4%BD%93%E8%82%B2%E3%80%81%E5%86%9B%E7%90%86.html","/courses/SECE/freshman/%E5%85%AC%E9%80%89%E8%AF%BE.html","/courses/SECE/freshman/%E5%A4%A7%E7%89%A9.html","/courses/SECE/freshman/%E6%80%9D%E6%94%BF%E8%AF%BE.html","/courses/SECE/freshman/%E6%8E%92%E9%98%9F%E8%AE%BA.html","/courses/SECE/freshman/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html","/courses/SECE/freshman/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1.html","/courses/SECE/freshman/%E7%BA%BF%E4%BB%A3.html","/courses/SECE/freshman/%E8%8B%B1%E8%AF%AD%E8%AF%BE.html","/courses/SECE/freshman/%E9%AB%98%E6%95%B0.html","/courses/SECE/sophomore/Matlab%EF%BC%88Mathworks%EF%BC%89.html","/courses/SECE/sophomore/%E4%BF%A1%E5%8F%B7%E4%B8%8E%E7%B3%BB%E7%BB%9F.html","/courses/SECE/sophomore/%E5%A4%8D%E5%8F%98%E5%87%BD%E6%95%B0.html","/courses/SECE/sophomore/%E5%B7%A5%E7%A8%8B%E5%88%B6%E5%9B%BE.html","/courses/SECE/sophomore/%E6%95%B0%E5%80%BC%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.html","/courses/SECE/sophomore/%E6%95%B0%E5%AD%97%E4%BF%A1%E5%8F%B7%E5%A4%84%E7%90%86.html","/courses/SECE/sophomore/%E6%95%B0%E7%94%B5.html","/courses/SECE/sophomore/%E6%A6%82%E7%8E%87%E8%AE%BA.html","/courses/SECE/sophomore/%E6%A8%A1%E7%94%B5.html","/courses/SECE/sophomore/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6.html","/courses/SECE/sophomore/%E9%9A%8F%E6%9C%BA%E8%BF%87%E7%A8%8B.html","/404.html","/schools/SECE/","/schools/","/courses/SECE/junior/","/courses/SECE/","/courses/","/courses/SECE/freshman/","/courses/SECE/sophomore/"],fe="SLIMSEARCH_QUERY_HISTORY",v=O(fe,[]),ge=()=>{const{queryHistoryCount:l}=g,t=l>0;return{enabled:t,queryHistories:v,addQueryHistory:r=>{t&&(v.value=Array.from(new Set([r,...v.value.slice(0,l-1)])))},removeQueryHistory:r=>{v.value=[...v.value.slice(0,r),...v.value.slice(r+1)]}}},x=l=>Fe[l.id]+("anchor"in l?`#${l.anchor}`:""),De="SLIMSEARCH_RESULT_HISTORY",{resultHistoryCount:U}=g,C=O(De,[]),He=()=>{const l=U>0;return{enabled:l,resultHistories:C,addResultHistory:t=>{if(l){const r={link:x(t),display:t.display};"header"in t&&(r.header=t.header),C.value=[r,...C.value.slice(0,U-1)]}},removeResultHistory:t=>{C.value=[...C.value.slice(0,t),...C.value.slice(t+1)]}}},je=l=>{const t=Be(),r=P(),D=he(),a=q(0),p=f(()=>a.value>0),m=me([]);return Ae(()=>{const{search:A,terminate:H}=ve(),d=Ce(i=>{const{resultsFilter:S=o=>o,querySplitter:L,suggestionsFilter:j,...k}=t.value;i?(a.value+=1,A(i,r.value,k).then(o=>S(o,i,r.value,D.value)).then(o=>{a.value-=1,m.value=o}).catch(o=>{console.warn(o),a.value-=1,a.value||(m.value=[])})):m.value=[]},g.searchDelay-g.suggestDelay,{maxWait:5e3});Y([l,r],([i])=>{d(i.join(" "))},{immediate:!0}),de(()=>{H()})}),{isSearching:p,results:m}};var Re=se({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(l,{emit:t}){const r=Ee(),D=P(),a=le(te),{enabled:p,addQueryHistory:m,queryHistories:A,removeQueryHistory:H}=ge(),{enabled:d,resultHistories:i,addResultHistory:S,removeResultHistory:L}=He(),j=p||d,k=re(l,"queries"),{results:o,isSearching:_}=je(k),u=ue({isQuery:!0,index:0}),B=q(0),h=q(0),$=f(()=>j&&(A.value.length>0||i.value.length>0)),R=f(()=>o.value.length>0),w=f(()=>o.value[B.value]||null),V=()=>{const{isQuery:e,index:s}=u;s===0?(u.isQuery=!e,u.index=e?i.value.length-1:A.value.length-1):u.index=s-1},z=()=>{const{isQuery:e,index:s}=u;s===(e?A.value.length-1:i.value.length-1)?(u.isQuery=!e,u.index=0):u.index=s+1},G=()=>{B.value=B.value>0?B.value-1:o.value.length-1,h.value=w.value.contents.length-1},J=()=>{B.value=B.value<o.value.length-1?B.value+1:0,h.value=0},K=()=>{h.value<w.value.contents.length-1?h.value+=1:J()},W=()=>{h.value>0?h.value-=1:G()},Q=e=>e.map(s=>ye(s)?s:E(s[0],s[1])),N=e=>{if(e.type==="customField"){const s=pe[e.index]||"$content",[n,F=""]=Se(s)?s[D.value].split("$content"):s.split("$content");return e.display.map(c=>E("div",Q([n,...c,F])))}return e.display.map(s=>E("div",Q(s)))},y=()=>{B.value=0,h.value=0,t("updateQuery",""),t("close")},X=()=>p?E("ul",{class:"slimsearch-result-list"},E("li",{class:"slimsearch-result-list-item"},[E("div",{class:"slimsearch-result-title"},a.value.queryHistory),A.value.map((e,s)=>E("div",{class:["slimsearch-result-item",{active:u.isQuery&&u.index===s}],onClick:()=>{t("updateQuery",e)}},[E(I,{class:"slimsearch-result-type"}),E("div",{class:"slimsearch-result-content"},e),E("button",{class:"slimsearch-remove-icon",innerHTML:M,onClick:n=>{n.preventDefault(),n.stopPropagation(),H(s)}})]))])):null,Z=()=>d?E("ul",{class:"slimsearch-result-list"},E("li",{class:"slimsearch-result-list-item"},[E("div",{class:"slimsearch-result-title"},a.value.resultHistory),i.value.map((e,s)=>E(T,{to:e.link,class:["slimsearch-result-item",{active:!u.isQuery&&u.index===s}],onClick:()=>{y()}},()=>[E(I,{class:"slimsearch-result-type"}),E("div",{class:"slimsearch-result-content"},[e.header?E("div",{class:"content-header"},e.header):null,E("div",e.display.map(n=>Q(n)).flat())]),E("button",{class:"slimsearch-remove-icon",innerHTML:M,onClick:n=>{n.preventDefault(),n.stopPropagation(),L(s)}})]))])):null;return ae("keydown",e=>{if(l.isFocusing){if(R.value){if(e.key==="ArrowUp")W();else if(e.key==="ArrowDown")K();else if(e.key==="Enter"){const s=w.value.contents[h.value];m(l.queries.join(" ")),S(s),r.push(x(s)),y()}}else if(d){if(e.key==="ArrowUp")V();else if(e.key==="ArrowDown")z();else if(e.key==="Enter"){const{index:s}=u;u.isQuery?(t("updateQuery",A.value[s]),e.preventDefault()):(r.push(i.value[s].link),y())}}}}),Y([B,h],()=>{var e;(e=document.querySelector(".slimsearch-result-list-item.active .slimsearch-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>E("div",{class:["slimsearch-result-wrapper",{empty:l.queries.length?!R.value:!$.value}],id:"slimsearch-results"},l.queries.length?_.value?E(oe,{hint:a.value.searching}):R.value?E("ul",{class:"slimsearch-result-list"},o.value.map(({title:e,contents:s},n)=>{const F=B.value===n;return E("li",{class:["slimsearch-result-list-item",{active:F}]},[E("div",{class:"slimsearch-result-title"},e||a.value.defaultTitle),s.map((c,ee)=>{const b=F&&h.value===ee;return E(T,{to:x(c),class:["slimsearch-result-item",{active:b,"aria-selected":b}],onClick:()=>{m(l.queries.join(" ")),S(c),y()}},()=>[c.type==="text"?null:E(c.type==="title"?ie:c.type==="heading"?ne:ce,{class:"slimsearch-result-type"}),E("div",{class:"slimsearch-result-content"},[c.type==="text"&&c.header?E("div",{class:"content-header"},c.header):null,E("div",N(c))])])})])})):a.value.emptyResult:j?$.value?[X(),Z()]:a.value.emptyHistory:a.value.emptyResult)}});export{Re as default};
